# 디아블록 (Diablock)

**디아블록**은 디아블로 시리즈에서 영감을 받아 제작된 3D 블록 스타일의 자동 전투 디펜스 게임입니다. 플레이어는 끊임없이 몰려오는 몬스터 무리를 상대하고, 강력한 아이템을 파밍하며 캐릭터를 성장시켜 점점 더 어려워지는 도전에 맞서게 됩니다.

## 목차

1.  [게임 개요](#게임-개요)
2.  [주요 기능](#주요-기능)
3.  [게임 플레이 메커니즘](#게임-플레이-메커니즘)
    *   [전투 시스템](#전투-시스템)
    *   [플레이어 성장](#플레이어-성장)
    *   [아이템 시스템](#아이템-시스템)
    *   [몬스터](#몬스터)
    *   [경제 시스템](#경제-시스템)
    *   [게임 오버 및 재시작](#게임-오버-및-재시작)
4.  [기술 스택](#기술-스택)
5.  [프로젝트 구조](#프로젝트-구조)
6.  [실행 방법](#실행-방법)
7.  [향후 개발 아이디어](#향후-개발-아이디어)

## 게임 개요

디아블록의 핵심은 자동 전투와 끊임없는 성장입니다. 플레이어는 웨이브 형태로 몰려오는 적들을 자동으로 공격하며, 전략적으로 캐릭터를 움직여 전투를 유리하게 이끌 수 있습니다. 몬스터를 처치하여 경험치, 골드, 아이템, 강화석, 그리고 보스 처치 시 "영웅의 정수"를 획득합니다. 이를 통해 레벨을 올리고, 새로운 스킬을 배우며, 더 좋은 장비를 장착하고 강화하여 캐릭터를 강력하게 만듭니다. 게임 오버 시에도 "영웅의 정수"와 일부 자원은 유지되어, "유산의 제단"을 통해 영구적인 능력치 강화를 할 수 있어 반복 플레이의 재미를 더합니다.

## 주요 기능

*   **영구적인 성장 (유산의 제단):** "영웅의 정수"를 사용하여 캐릭터의 기본 능력치(최대 체력, 공격력, 방어력, 체력 재생)를 영구적으로 강화할 수 있습니다. 이는 게임 오버 후에도 유지됩니다.
*   **다양한 아이템 시스템:**
    *   **장비 종류:** 무기, 투구, 갑옷, 다리 보호구, 장화, 장갑, 반지, 목걸이 등 다양한 부위에 장착 가능.
    *   **아이템 희귀도:** 일반(Common), 고급(Uncommon), 희귀(Rare), 영웅(Epic), 전설(Legendary) 등급으로 구분되며, 등급에 따라 능력치 개수와 효과가 달라집니다.
    *   **무작위 능력치:** 아이템은 다양한 종류의 무작위 능력치(스탯 모디파이어)를 가집니다.
*   **장비 강화:** "강화석"과 골드를 사용하여 장비의 기본 능력치를 향상시킬 수 있습니다. 강화 레벨은 아이템에 `+X` 형태로 표시되며, 게임 오버 후에도 유지됩니다.
*   **심도 있는 스킬 트리:** 전투, 생존, 정밀함 세 가지 계열의 다양한 액티브/패시브 스킬을 습득하여 플레이 스타일을 특화할 수 있습니다.
*   **웨이브 및 보스 시스템:** 점점 더 강력해지는 몬스터 웨이브가 등장하며, 특정 웨이브마다 강력한 보스 몬스터가 출현하여 도전 욕구를 자극합니다.
*   **상태 이상 효과:** 독, 기절, 방어력 감소, 공격 속도 증가, 이동 속도 증가, 취약, 둔화, 출혈 등 다양한 상태 이상 효과가 전투에 변수를 더합니다.
*   **경제 시스템:**
    *   **골드:** 아이템 구매, 상점 목록 새로고침, 장비 강화에 사용됩니다.
    *   **영웅의 정수:** "유산의 제단"에서 영구 능력치 업그레이드에 사용됩니다. 보스 처치 및 웨이브 진행도에 따라 획득합니다.
    *   **강화석:** 장비 강화에 골드와 함께 소모됩니다. 몬스터 처치 시 획득하며, 게임 오버 시 초기화됩니다.
*   **상점 시스템:** 다양한 아이템을 구매하거나 소지품을 판매할 수 있으며, 골드를 소모하여 상점 목록을 새로고침할 수 있습니다.
*   **자동화 편의 기능:**
    *   **자동 장착:** 획득한 아이템이 현재 장착한 아이템보다 좋을 경우 자동으로 교체 장착합니다 (토글 가능).
    *   **자동 기술 습득:** 사용 가능한 스킬 포인트가 있고 배울 수 있는 스킬이 있을 경우 자동으로 습득합니다 (토글 가능).
*   **3D 미니맵:** Three.js를 활용하여 플레이어와 몬스터의 위치, 공격 및 스킬 발동 효과를 시각적으로 보여줍니다.
*   **저장 및 불러오기:** 게임 진행 상황(플레이어 상태, 아이템, 스킬, 웨이브 등)이 브라우저의 `localStorage`에 자동으로 저장 및 로드됩니다.
*   **다양한 UI 패널:** 플레이어 정보(HUD), 전투 기록, 소지품, 캐릭터 상세 정보, 기술 트리, 상점, 유산의 제단, 대장간(장비 강화), 현재 필드 _몬스터 목록 등을 제공합니다.

## 게임 플레이 메커니즘

### 전투 시스템

*   **자동 전투:** 플레이어는 주변의 적을 자동으로 공격합니다.
*   **플레이어 이동 및 교전:** 플레이어는 3D 공간 내에서 자유롭게 이동할 수 있으며, 특정 범위 내의 몬스터와 교전 상태에 돌입합니다. 교전 중인 몬스터를 우선적으로 공격합니다.
*   **데미지 계산:** 공격력, 방어력, 치명타 확률/피해, 상태 이상 효과 등을 종합적으로 고려하여 최종 피해량이 결정됩니다.
*   **스킬 발동:** 특정 조건(확률, 연속 공격, 특정 상황 등)에 따라 스킬이 자동으로 발동되어 전투에 영향을 줍니다.
*   **상태 이상:** 플레이어와 몬스터 모두 다양한 상태 이상 효과를 주고받을 수 있으며, 이는 전투의 양상을 크게 바꿀 수 있습니다.

### 플레이어 성장

*   **세션 내 성장 (Per-Run):**
    *   **레벨업:** 몬스터를 처치하여 경험치를 얻고 레벨을 올립니다. 레벨업 시 스킬 포인트를 획득합니다.
    *   **스킬 습득:** 획득한 스킬 포인트를 사용하여 스킬 트리에서 원하는 스킬을 배우고 강화합니다.
    *   **아이템 파밍:** 몬스터 처치 또는 상점 구매를 통해 새로운 장비를 획득합니다. (아이템 자체와 강화 레벨은 영구 유지)
*   **영구 성장 (Permanent):**
    *   **골드 및 아이템:** 획득한 골드와 아이템(소지품 및 장착 아이템)은 게임 오버 후에도 유지됩니다.
    *   **장비 강화 상태:** 아이템에 적용된 강화 레벨은 영구적으로 유지됩니다.
    *   **영웅의 정수:** 보스 몬스터 처치 또는 게임 오버 시 달성한 최고 웨이브에 따라 "영웅의 정수"를 얻습니다.
    *   **유산의 제단:** 획득한 "영웅의 정수"를 사용하여 캐릭터의 기본 최대 체력, 공격력, 방어력, 체력 재생을 영구적으로 업그레이드합니다. 이 업그레이드는 게임 오버 후에도 계속 유지됩니다.

### 아이템 시스템

*   **아이템 종류:** 무기, 투구, 갑옷, 다리 보호구, 장화, 장갑, 반지, 목걸이가 있습니다. 각 부위별로 장착할 수 있는 아이템이 정해져 있습니다.
*   **아이템 희귀도:** 일반(흰색) < 고급(파란색) < 희귀(노란색) < 영웅(보라색) < 전설(주황색) 순으로 등급이 나뉩니다. 희귀도가 높을수록 더 많은, 그리고 더 강력한 능력치를 가질 확률이 높습니다.
*   **무작위 능력치 (Modifiers):** 아이템은 공격력, 방어력, 체력, 치명타 확률, 치명타 피해, 체력 재생, 공격 속도, 이동 속도 등 다양한 종류의 능력치를 무작위로 가집니다. 능력치는 고정 값 증가('flat') 또는 비율 증가('percent') 형태를 가집니다.
*   **아이템 레벨 요구사항:** 일부 아이템은 특정 플레이어 레벨 이상이어야 장착할 수 있습니다.
*   **장비 강화:**
    *   선택한 장비를 "강화석"과 골드를 소모하여 강화할 수 있습니다.
    *   강화 성공 시 아이템 이름 옆에 `+X` 형태로 강화 레벨이 표시됩니다.
    *   강화 레벨에 따라 아이템의 각 기본 능력치 모디파이어 값이 일정 비율만큼 증가합니다.
    *   최대 강화 레벨은 아이템의 희귀도에 따라 제한됩니다.
    *   강화된 아이템은 게임 오버 후에도 강화 상태가 유지됩니다.

### 몬스터

*   **일반 몬스터:** 웨이브마다 다양한 종류와 능력치를 가진 일반 몬스터들이 등장합니다.
*   **보스 몬스터:** 특정 웨이브(예: 10 웨이브마다)에는 강력한 보스 몬스터가 등장합니다. 보스는 일반 몬스터보다 훨씬 높은 체력과 공격력을 가지며, 처치 시 더 좋은 보상("영웅의 정수" 포함)을 제공합니다.
*   **몬스터 스케일링:** 웨이브가 진행될수록 몬스터의 기본 능력치(체력, 공격력, 방어력)가 점진적으로 강해집니다.
*   **특수 능력:** 일부 몬스터는 플레이어에게 상태 이상 효과를 거는 등의 특수 능력을 가지고 있습니다.

### 경제 시스템

*   **골드 (Gold):**
    *   획득: 몬스터 처치, 아이템 판매.
    *   사용: 상점에서 아이템 구매, 상점 목록 새로고침, 장비 강화.
    *   유지: 게임 오버 후에도 보유 골드는 유지됩니다.
*   **영웅의 정수 (Essence of Heroes):**
    *   획득: 보스 몬스터 처치, 게임 오버 시 최고 웨이브 달성도에 따른 보상.
    *   사용: "유산의 제단"에서 영구적인 캐릭터 능력치 업그레이드.
    *   유지: 게임 오버 후에도 유지됩니다.
*   **강화석 (Enhancement Stones):**
    *   획득: 몬스터 처치 시 일정 확률로 드롭.
    *   사용: 장비 강화 시 골드와 함께 소모.
    *   초기화: 게임 오버 후 새로운 도전을 시작할 때 0으로 초기화됩니다.

### 게임 오버 및 재시작

*   플레이어의 체력이 0이 되면 게임 오버 상태가 됩니다.
*   게임 오버 시:
    *   **유지되는 항목:** 골드, 현재 장착/소지한 모든 아이템 (강화 레벨 포함), 영웅의 정수, 영구 업그레이드 레벨.
    *   **초기화되는 항목:** 플레이어 레벨(1로 초기화), 경험치, 스킬 포인트, 습득한 모든 스킬 레벨, 강화석.
*   게임 오버 화면에서 "유산의 제단으로 이동"을 선택하여 영구 업그레이드를 진행한 후, 또는 "바로 다시 시작"을 선택하여 웨이브 1부터 새로운 도전을 시작할 수 있습니다.

## 기술 스택

*   **프론트엔드:** React (with TypeScript)
*   **스타일링:** Tailwind CSS
*   **3D 렌더링 (미니맵):** Three.js
*   **상태 관리:** React Hooks (`useState`, `useEffect`, `useCallback`, `useMemo`, `useRef`)
*   **데이터 저장:** 브라우저 `localStorage` (백엔드 없음)

## 프로젝트 구조 (주요 디렉토리)

*   `public/`: `index.html` 등 정적 에셋.
*   `src/`: 애플리케이션 소스 코드.
    *   `components/`: React UI 컴포넌트.
        *   `ui/`: 재사용 가능한 기본 UI 요소 (버튼, 모달 등).
    *   `hooks/`: 커스텀 React Hooks.
        *   `useGameEngine.ts`: 게임의 핵심 로직과 상태 관리를 담당.
    *   `utils/`: 유틸리티 함수.
        *   `gameUtils.ts`: 게임플레이 관련 계산 및 생성 함수.
        *   `colorUtils.ts`: 색상 변환 유틸리티.
    *   `types.ts`: TypeScript 인터페이스 및 타입 정의.
    *   `diablockConstants.ts`: 게임 내 모든 상수(몬스터 정의, 스킬 정의, 아이템 기본 정보, 게임 설정 값 등)를 관리.
    *   `App.tsx`: 메인 애플리케이션 컴포넌트, 레이아웃 및 패널 관리.
    *   `index.tsx`: React 애플리케이션 진입점.

## 실행 방법

이 애플리케이션은 별도의 빌드 과정 없이 최신 웹 브라우저에서 `index.html` 파일을 직접 열어 실행할 수 있도록 구성되어 있습니다. (esbuild 또는 유사한 개발 서버를 사용하여 로컬 개발 환경을 구성할 수도 있습니다.)

1.  프로젝트 파일을 다운로드합니다.
2.  웹 브라우저에서 `index.html` 파일을 엽니다.
3.  게임이 로드되고 바로 플레이할 수 있습니다. 모든 진행 상황은 브라우저의 `localStorage`에 자동으로 저장됩니다.

## 향후 개발 아이디어

*   **다양한 콘텐츠 추가:**
    *   새로운 몬스터 종류, 독특한 패턴을 가진 보스 몬스터 추가.
    *   새로운 스킬 트리 또는 기존 스킬 확장 (궁극기 등).
    *   더 다양한 아이템 능력치 및 고유 아이템(Unique Items) 추가.
*   **시스템 확장:**
    *   아이템 분해 및 재료를 사용한 아이템 제작/개조 시스템.
    *   더 복잡하고 상호작용하는 상태 이상 효과.
    *   룬워드 시스템.
*   **시각적/청각적 개선:**
    *   미니맵에 단순 큐브가 아닌 실제 플레이어/몬스터 모델링 적용.
    *   공격 효과, 스킬 효과, 환경 효과 등 시각적 이펙트 강화.
    *   배경 음악 및 효과음 추가.
*   **사용자 경험 향상:**
    *   도전 과제 및 업적 시스템.
    *   세이브 파일 수동 가져오기/내보내기 기능.
    *   게임 난이도 조절 옵션.
*   **고급 강화 시스템:**
    *   강화 성공률 변화, 강화 실패 시 아이템 파괴 또는 등급 하락 등의 위험 요소 추가.
    *   강화 보조 아이템.

---

즐겁게 플레이해주시길 바랍니다! 피드백은 언제나 환영입니다.